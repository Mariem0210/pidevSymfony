{{ form_start(form, {'attr': {'id': 'tournoiForm', 'class': 'needs-validation'}}) }}
    <div class="row">
        <div class="col-md-6 mb-3">
            <div class="input-group input-group-static mb-4">
                {{ form_label(form.nomt, 'Nomt', {'label_attr': {'class': 'ms-0'}}) }}
                {{ form_widget(form.nomt, {'attr': {'class': 'form-control', 'oninput': 'validateField(this)'}}) }}
                <span class="text-danger error-message">{{ form_errors(form.nomt) }}</span>
            </div>
        </div>
        
        <div class="col-md-6 mb-3">
            <div class="input-group input-group-static mb-4">
                {{ form_label(form.prixt, 'Prixt', {'label_attr': {'class': 'ms-0'}}) }}
                {{ form_widget(form.prixt, {'attr': {'class': 'form-control', 'oninput': 'validateField(this)'}}) }}
                <span class="text-danger error-message">{{ form_errors(form.prixt) }}</span>
            </div>
        </div>
    </div>
    
    <div class="row">
        <div class="col-12 mb-3">
            <div class="input-group input-group-static mb-4">
                {{ form_label(form.descriptiont, 'Descriptiont', {'label_attr': {'class': 'ms-0'}}) }}
                {{ form_widget(form.descriptiont, {'attr': {'class': 'form-control', 'rows': '4', 'oninput': 'validateField(this)'}}) }}
                <span class="text-danger error-message">{{ form_errors(form.descriptiont) }}</span>
            </div>
        </div>
    </div>
    
    <div class="row">
        <div class="col-md-6 mb-3">
            <div class="input-group input-group-static mb-4">
                {{ form_label(form.date_debutt, 'Date_debutt', {'label_attr': {'class': 'ms-0'}}) }}
                {{ form_widget(form.date_debutt, {'attr': {'class': 'form-control', 'min': 'now' | date('Y-m-d'), 'onchange': 'validateDates()'}}) }}
                <span class="text-danger error-message">{{ form_errors(form.date_debutt) }}</span>
            </div>
        </div>
        
        <div class="col-md-6 mb-3">
            <div class="input-group input-group-static mb-4">
                {{ form_label(form.date_fint, 'Date_fint', {'label_attr': {'class': 'ms-0'}}) }}
                {{ form_widget(form.date_fint, {'attr': {'class': 'form-control', 'onchange': 'validateDates()'}}) }}
                <span class="text-danger error-message">{{ form_errors(form.date_fint) }}</span>
            </div>
        </div>
    </div>
    
    <div class="row">
        <div class="col-md-6 mb-3">
            <div class="input-group input-group-static mb-4">
                {{ form_label(form.nbr_equipes, 'Nbr_equipes', {'label_attr': {'class': 'ms-0'}}) }}
                {{ form_widget(form.nbr_equipes, {'attr': {'class': 'form-control', 'oninput': 'validateField(this)'}}) }}
                <span class="text-danger error-message">{{ form_errors(form.nbr_equipes) }}</span>
            </div>
        </div>
        
        <div class="col-md-6 mb-3">
            <div class="input-group input-group-static mb-4">
                {{ form_label(form.statutt, 'Statutt', {'label_attr': {'class': 'ms-0'}}) }}
                {{ form_widget(form.statutt, {'attr': {'class': 'form-control', 'oninput': 'validateField(this)'}}) }}
                <span class="text-danger error-message">{{ form_errors(form.statutt) }}</span>
            </div>
        </div>
    </div>
    
    <div class="row mt-4">
        <div class="col-12">
            <button type="submit" class="btn bg-gradient-primary">
                <i class="material-icons text-sm me-2">save</i>
                {{ button_label|default('Save') }}
            </button>
        </div>
    </div>
{{ form_end(form) }}

<script>
document.addEventListener("DOMContentLoaded", function() {
    const today = new Date().toISOString().split('T')[0];
    const dateDebutField = document.querySelector('input[id$="_date_debutt"]');
    if (dateDebutField) {
        dateDebutField.setAttribute("min", today);
    }
});

function validateField(field) {
    let errorSpan = field.closest('.input-group').querySelector('.error-message');
    if (!field.checkValidity()) {
        errorSpan.textContent = field.validationMessage;
        field.classList.add('is-invalid');
    } else {
        errorSpan.textContent = "";
        field.classList.remove('is-invalid');
    }
}

function validateDates() {
    const dateDebut = document.querySelector('input[id$="_date_debutt"]');
    const dateFin = document.querySelector('input[id$="_date_fint"]');
    
    if (!dateDebut || !dateFin) return;
    
    let errorSpan = dateFin.closest('.input-group').querySelector('.error-message');
    
    if (dateFin.value && dateDebut.value && new Date(dateFin.value) <= new Date(dateDebut.value)) {
        errorSpan.textContent = "End date must be after start date";
        dateFin.classList.add('is-invalid');
    } else {
        errorSpan.textContent = "";
        dateFin.classList.remove('is-invalid');
    }
}
</script>

<style>
.error-message {
    display: block;
    font-size: 0.75rem;
    margin-top: 0.25rem;
}

.is-invalid {
    border-color: #f44335 !important;
}
</style>